apply plugin: 'java'

repositories{
    mavenCentral()
    jcenter()
    maven { url 'https://www.jitpack.io' }
}

ext{ /* Как вариант можно создать карту и туда класть */
    arcVersion        = 'v115'
    jobaVersion       = 'v2.10.8'
    lombokVersion     = '1.18.12'
    discord4jVersion  = '3.1.1'

    jaxbVersion       = '2.2.11'
    hibernateVersion  = '5.4.22.Final'
    postgresqlVersion = '9.0-801.jdbc4'
}

sourceSets.main.java.srcDirs = ["src/main/java/"]
sourceSets.main.resources.srcDirs = ["src/main/resources"]
project.ext.mainClassName = "insidebot.InsideBot"

dependencies{
    implementation "com.discord4j:discord4j-core:$discord4jVersion"
    implementation "com.github.Anuken.Arc:arc-core:$arcVersion"
    implementation "org.reflections:reflections:0.9.12"
    implementation "com.github.JodaOrg:joda-time:v2.10.6"

    // data implements
    implementation "javax.xml.bind:jaxb-api:$jaxbVersion"
    implementation "org.hibernate:hibernate-core:$hibernateVersion"
    implementation "postgresql:postgresql:$postgresqlVersion"

    compileOnly "org.projectlombok:lombok:$lombokVersion"
    annotationProcessor "org.projectlombok:lombok:$lombokVersion"
}

task dist(type: Jar){
    from files(sourceSets.main.output.classesDirs)
    from files(sourceSets.main.output.resourcesDir)
    from (rootDir){ include "settings.properties" } // опционально
    from {configurations.runtimeClasspath.collect{it.isDirectory() ? it : zipTree(it)}}

    archiveFileName = "${project.name}.jar"

    manifest { attributes 'Main-Class': project.mainClassName }
}

